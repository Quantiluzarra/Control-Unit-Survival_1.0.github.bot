<!DOCTYPE html>
<html>
<head>
    <title>Pixel World</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: #000;
            font-family: monospace;
        }
        canvas { 
            position: absolute;
            top: 0;
            left: 0;
        }
        #inventory {
            position: fixed;
            bottom: 10px;
            width: 100%;
            display: flex;
            justify-content: center;
        }
        .block {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.3);
            margin: 0 5px;
            cursor: pointer;
            text-align: center;
            line-height: 50px;
            color: white;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="inventory">
        <div class="block" data-block="1">ü™®</div>
        <div class="block" data-block="2">üå≥</div>
        <div class="block" data-block="3">üåø</div>
    </div>

    <script>
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –º–∏—Ä–∞
    const TILE_SIZE = 40;
    const WORLD_WIDTH = 200;
    const WORLD_HEIGHT = 100;

    // –¶–≤–µ—Ç–∞ –±–ª–æ–∫–æ–≤
    const BLOCK_COLORS = {
        0: '#135',     // –ü—É—Å—Ç–æ—Ç–∞
        1: '#654',     // –ö–∞–º–µ–Ω—å
        2: '#461',     // –î–µ—Ä–µ–≤–æ
        3: '#2a4'      // –¢—Ä–∞–≤–∞
    };

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏—Ä–∞
    let world = Array(WORLD_WIDTH).fill().map(() => 
        Array(WORLD_HEIGHT).fill(0)
    );

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞
    function generateWorld() {
        for (let x = 0; x < WORLD_WIDTH; x++) {
            // –°–æ–∑–¥–∞–µ–º —Ö–æ–ª–º–∏—Å—Ç—ã–π –ª–∞–Ω–¥—à–∞—Ñ—Ç
            let height = Math.floor(WORLD_HEIGHT * 0.6 + 
                Math.sin(x * 0.1) * 10 + 
                Math.random() * 5);
            
            for (let y = height; y < WORLD_HEIGHT; y++) {
                world[x][y] = y > height + 3 ? 1 : 2;
            }
        }
    }

    // –ò–≥—Ä–æ–∫
    const player = {
        x: WORLD_WIDTH / 2,
        y: 10,
        width: 1,
        height: 2,
        speed: 5,
        velocityY: 0,
        selectedBlock: 1
    };

    // –§–∏–∑–∏–∫–∞ –∏ –¥–≤–∏–∂–µ–Ω–∏–µ
    function updatePhysics() {
        // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
        player.velocityY += 0.5;
        player.y += player.velocityY;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π —Å –∑–µ–º–ª–µ–π
        if (world[Math.floor(player.x)][Math.floor(player.y + player.height)]) {
            player.y = Math.floor(player.y);
            player.velocityY = 0;
        }
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    const keys = {
        left: false,
        right: false,
        up: false
    };

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') keys.left = true;
        if (e.key === 'ArrowRight') keys.right = true;
        if (e.key === 'ArrowUp') keys.up = true;
    });

    document.addEventListener('keyup', (e) => {
        if (e.key === 'ArrowLeft') keys.left = false;
        if (e.key === 'ArrowRight') keys.right = false;
        if (e.key === 'ArrowUp') keys.up = false;
    });

    // –ö–ª–∏–∫ –º—ã—à–∏ –¥–ª—è —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è/—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–ª–æ–∫–æ–≤
    canvas.addEventListener('click', (e) => {
        const rect = canvas.getBoundingClientRect();
        const mouseX = Math.floor((e.clientX - rect.left) / TILE_SIZE);
        const mouseY = Math.floor((e.clientY - rect.top) / TILE_SIZE);

        // –†–∞–∑—Ä—É—à–µ–Ω–∏–µ –±–ª–æ–∫–∞
        if (world[mouseX][mouseY] !== 0) {
            world[mouseX][mouseY] = 0;
        } 
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–ª–æ–∫–∞
        else {
            world[mouseX][mouseY] = player.selectedBlock;
        }
    });

    // –í—ã–±–æ—Ä –±–ª–æ–∫–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
    document.querySelectorAll('.block').forEach(block => {
        block.addEventListener('click', () => {
            player.selectedBlock = parseInt(block.dataset.block);
        });
    });

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–∏—Ä–∞
    function drawWorld() {
        ctx.fillStyle = '#000';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // –°–º–µ—â–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∏–≥—Ä–æ–∫–∞
        const offsetX = player.x * TILE_SIZE - canvas.width / 2;
        const offsetY = player.y * TILE_SIZE - canvas.height / 2;

        for (let x = 0; x < WORLD_WIDTH; x++) {
            for (let y = 0; y < WORLD_HEIGHT; y++) {
                if (world[x][y] !== 0) {
                    ctx.fillStyle = BLOCK_COLORS[world[x][y]];
                    ctx.fillRect(
                        x * TILE_SIZE - offsetX, 
                        y * TILE_SIZE - offsetY, 
                        TILE_SIZE, 
                        TILE_SIZE
                    );
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–∞
        ctx.fillStyle = '#f00';
        ctx.fillRect(
            player.x * TILE_SIZE - offsetX, 
            player.y * TILE_SIZE - offsetY, 
            player.width * TILE_SIZE, 
            player.height * TILE_SIZE
        );
    }

    // –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
    function gameLoop() {
        // –î–≤–∏–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
        if (keys.left) player.x -= 0.1;
        if (keys.right) player.x += 0.1;
        if (keys.up && player.velocityY === 0) {
            player.velocityY = -10;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏–∫–∏
        updatePhysics();

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
        drawWorld();

        requestAnimationFrame(gameLoop);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    generateWorld();
    gameLoop();

    // –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });
    </script>
</body>
</html>
